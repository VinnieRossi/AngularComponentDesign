<!-- style="height: 50vh; overflow-y: auto"  -->
<div class="scrollbar scrollbar-near-moon" style="padding-right: .5rem;">
  <h2>Angular Component Designer</h2>
  <!-- Form containing app settings and container/component buttons -->
  <section>
    <h5>Application Settings</h5>
    <!-- App settings at the top of the page -->
    <section>
      <div class="row" style="width: 50%;">

        <!-- Indentation -->
        <div class="col">
          <div class="form-group">
            <label for="">Indentation:</label>
            <input type="text" name="indentAmount" class="form-control" placeholder="eg. 2"
              [(ngModel)]="userSettings.indentAmount">
          </div>
        </div>

        <!-- App Prefix -->
        <div class="col">
          <div class="form-group">
            <label for="">Application prefix:</label>
            <input type="text" name="applicationPrefix" class="form-control" placeholder="eg. app"
              [(ngModel)]="userSettings.applicationPrefix">
          </div>

        </div>

        <!-- App Styling -->
        <div class="col">
          <div class="form-group">
            <label for="">Application Styling:</label>
            <input type="text" name="applicationStyling" class="form-control" placeholder="eg. css"
              [(ngModel)]="userSettings.applicationStyling">
          </div>
        </div>

      </div>
    </section>

    <!-- Buttons for adding containers and components -->
    <div class="form-group">
      <button class="btn btn-info" style="margin-right: 5px;" (click)="createContainer()">Add
        Container</button>
      <!-- <button class="btn btn-primary" [ngClass]="{ 'btn-light': containers.length === 0 }"
        [disabled]="containers.length === 0" (click)="createPresenter()">Add
        Component</button> -->
      <button *ngIf="this.containers.length && this.components.length" (click)="generateModuleCode()"
        class="btn btn-success" style="float: right;" title="Generate code for all containers and all components">Get
        ALL Code</button>
    </div>

  </section>

  <!-- Displays all containers and nested components in list layout -->
  <!--  <section *ngIf="this.containers.length"> -->
  <section *ngIf="false">
    <h3>Containers</h3>
    <ul class="list-group">
      <li *ngFor="let container of containers" class="list-group-item" title="Edit Container">
        <div class="d-flex w-100 justify-content-between">
          <h5 class="mb-1 text-info">{{container.name}}</h5>
        </div>

        <!-- List of components within the parent container -->
        <section *ngIf="container.components.length">
          <h5>Components</h5>
          <ul class="list-group">
            <li *ngFor="let component of container.components" class="list-group-item" title="Edit Component">

              <div class="d-flex w-100 justify-content-between">
                <h5 class="mb-1 text-primary">{{component.name}}</h5>
              </div>

              <p class="mb-1">Input Properties</p>
              <small *ngFor="let input of component.inputProperties"><span>@Input() {{input.name}}:
                  {{input.type}}</span></small>
              <p class="mb-1" style="margin-top: .25rem;">Event Emitters</p>
              <small *ngFor="let event of component.eventEmitters"><span>@Output() {{event.name}}:
                  EventEmitter&lt;{{event.type}}&gt;</span></small>
              <div class="clearfix" style="margin-top: 1rem;">
                <button (click)="editComponent(component)" class="btn btn-light" style="float: left;">Edit
                  Component</button>
                <button (click)="getComponentCode(component)" class="btn btn-primary" style="float: right;"
                  title="Generate code for this component">Get component code!</button>
              </div>
            </li>
          </ul>

        </section>

        <div class="clearfix" style="margin-top: 1rem;">
          <button (click)="editContainer(container)" class="btn btn-light" style="float: left;">Edit
            Container</button>
          <button (click)="getContainerCode(container)" class="btn btn-info" style="float: right;"
            title="Generate code for this container">Get container code!</button>
        </div>
      </li>
    </ul>
  </section>

  <!-- Displays all containers and nested components in grid layout -->
  <section *ngIf="this.containers.length">
    <div *ngFor="let container of containers" class="container-grid" [style.width.%]="100 / this.containers.length">

      <div class="container-grid-box">
        <h5 class="text-info">{{container.name}}</h5>
        <button class="btn btn-primary container-add-presenter-button" (click)="createPresenter(container)">Add
          Presenter</button>
      </div>

      <!-- Child Presenters of Container -->
      <div *ngFor="let presenter of container.components; index as i" [ngClass]="getClassForPresenter(i)">
        <span style="font-size: 1rem;">{{presenter.name}}</span>

        <!-- Display/Add Input Property -->
        <div>

          <button *ngIf="!isCreatingInput" [disabled]="isCreatingEvent" (click)="showCreateInputProperty()"
            class="btn btn-success btn-xs">+
            Add Input Property</button>

          <!-- Creating a new input property -->
          <div *ngIf="isCreatingInput">

            <!-- Input Property Name and Type-->
            <div class="input-group input-group-sm">
              <input type="text" name="inputName" class="form-control" autofocus
                placeholder="Property name (eg. isVisible)" [(ngModel)]="newInputProperty.name">
              <div class="input-group-append">
                <div class="row">
                  <div class="col">
                    <div ngbDropdown class="d-inline-block">
                      <button class="btn btn-outline-secondary btn-sm" style="border-radius: 0px" name="inputType"
                        id="dropdownBasic1" ngbDropdownToggle>{{newInputProperty.type}}</button>
                      <div ngbDropdownMenu aria-labelledby="dropdownBasic1">
                        <button ngbDropdownItem *ngFor="let type of supportedTypes"
                          (click)="setPropertyType(type)">{{type}}</button>
                      </div>
                    </div>
                  </div>
                </div>
                <button class="btn btn-outline-success btn-xs" (click)="createInputPropertyForPresenter(presenter)">+
                  Add</button>
              </div>
            </div>

          </div>

          <!-- List of all Input Properties -->
          <div *ngFor="let input of presenter.inputProperties">
            <small style="padding-right: 5px;" class="text-secondary">@Input() {{input.name}}: {{input.type}};</small>
            <button style="border: none;" (click)="removeInputPropertyFromPresenter(presenter, input)"
              class="btn btn-outline-danger btn-xs">&times;</button>
          </div>

        </div>

        <!-- Add Event Emitter -->
        <div>

          <button *ngIf="!isCreatingEvent" [disabled]="isCreatingInput" (click)="showCreateEventEmitter()"
            class="btn btn-success btn-xs">+ Add Event
            Emitter</button>

          <!-- Creating a new Event Emitter -->
          <div *ngIf="isCreatingEvent">

            <!-- Event Emitter Name and Type-->
            <div class="input-group input-group-sm">
              <input type="text" name="inputName" class="form-control" autofocus placeholder="Emitter name (eg. close)"
                [(ngModel)]="newEventEmitter.name">
              <div class="input-group-append">
                <div class="row">
                  <div class="col">
                    <div ngbDropdown class="d-inline-block">
                      <button class="btn btn-outline-secondary btn-sm" style="border-radius: 0px" name="inputType"
                        id="dropdownBasic1" ngbDropdownToggle>{{newEventEmitter.type}}</button>
                      <div ngbDropdownMenu aria-labelledby="dropdownBasic1">
                        <button ngbDropdownItem *ngFor="let type of supportedTypes"
                          (click)="setEmitterType(type)">{{type}}</button>
                      </div>
                    </div>
                  </div>
                </div>
                <button class="btn btn-outline-success btn-xs" (click)="createEventEmitterForPresenter(presenter)">+
                  Add</button>
              </div>
            </div>
          </div>

          <!-- List of all Event Emitters -->
          <div *ngFor="let event of presenter.eventEmitters">
            <small style="padding-right: 5px;" class="text-secondary">@Output() {{event.name}}:
              EventEmitter&lt;{{event.type}}&gt;</small>
            <button style="border: none;" (click)="removeEventEmitterFromPresenter(presenter, event)"
              class="btn btn-outline-danger btn-xs">&times;</button>
          </div>
        </div>
      </div>

    </div>
  </section>

</div>

<router-outlet></router-outlet>